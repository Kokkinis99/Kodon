/**
 * Kodon Toast - Sonner-style animations for Angular.
 * Uses CSS @starting-style for enter animations, no JavaScript needed.
 * @see https://emilkowal.ski/ui/building-a-toast-component
 */

@use './toast-visuals';

:host {
  --kodon-toast-padding: 14px 16px;
  --kodon-toast-border-radius: 10px;
  --kodon-toast-max-width: 400px;
  --kodon-toast-duration: 350ms;
  --kodon-toast-easing: cubic-bezier(0.165, 0.84, 0.44, 1);

  display: block;
  pointer-events: auto;
}

.kodon-toast-content {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: var(--kodon-toast-padding);
  border-radius: var(--kodon-toast-border-radius);
  max-width: var(--kodon-toast-max-width);
  width: max-content;
  backdrop-filter: blur(8px);
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.05);

  // Smooth transitions
  transition:
    transform var(--kodon-toast-duration) var(--kodon-toast-easing),
    opacity var(--kodon-toast-duration) var(--kodon-toast-easing);

  // Enter animation
  opacity: 1;
  transform: translateX(0);

  @starting-style {
    opacity: 0;
    transform: translateX(100%);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
    @starting-style {
      opacity: 1;
      transform: none;
    }
  }
}

// Exit animation
:host([data-removing='true']) .kodon-toast-content {
  opacity: 0;
  transform: translateX(100%);
}

// Position variants for different placements
:host-context([data-position^='top']) .kodon-toast-content {
  @starting-style {
    transform: translateY(-100%);
  }
}

:host-context([data-position^='top'][data-removing='true']) .kodon-toast-content,
:host([data-removing='true']):host-context([data-position^='top']) .kodon-toast-content {
  transform: translateY(-100%);
}

:host-context([data-position$='start']) .kodon-toast-content {
  @starting-style {
    transform: translateX(-100%);
  }
}

:host-context([data-position$='start'][data-removing='true']) .kodon-toast-content,
:host([data-removing='true']):host-context([data-position$='start']) .kodon-toast-content {
  transform: translateX(-100%);
}

:host-context([data-position$='center']) .kodon-toast-content {
  @starting-style {
    opacity: 0;
    transform: scale(0.9);
  }
}

:host([data-removing='true']):host-context([data-position$='center']) .kodon-toast-content {
  opacity: 0;
  transform: scale(0.9);
}
